(function(c){c.fn.tweet=function(f){function s(a){var b=parseInt(((arguments.length>1?arguments[1]:new Date).getTime()-a)/1E3,10),c="",c=b<60?b+" seconds ago":b<120?"a minute ago":b<2700?parseInt(b/60,10).toString()+" minutes ago":b<7200?"an hour ago":b<86400?""+parseInt(b/3600,10).toString()+" hours ago":b<172800?"a day ago":parseInt(b/86400,10).toString()+" days ago";return"about "+c}function j(){var d="https:"==document.location.protocol?"https:":"http:",b=a.fetch===null?a.count:a.fetch;if(a.list)return d+
"//"+a.twitter_api_url+"/1/"+a.username[0]+"/lists/"+a.list+"/statuses.json?per_page="+b+"&callback=?";else if(a.favorites)return d+"//"+a.twitter_api_url+"/favorites/"+a.username[0]+".json?count="+a.count+"&callback=?";else if(a.query===null&&a.username.length==1)return d+"//"+a.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+a.username[0]+"&count="+b+(a.retweets?"&include_rts=1":"")+"&callback=?";else{var c=a.query||"from:"+a.username.join(" OR from:");return d+"//"+a.twitter_search_url+
"/search.json?&q="+encodeURIComponent(c)+"&rpp="+b+"&callback=?"}}var a=c.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",
template:"{avatar}{time}{join}{text}",comparator:function(a,b){return b.tweet_time-a.tweet_time},filter:function(){return!0}},f);c.fn.extend({linkUrl:function(){var a=[],b=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi;this.each(function(){a.push(this.replace(b,function(a){return'<a href="'+(/^[a-z]+:/i.test(a)?
a:"http://"+a)+'">'+a+"</a>"}))});return c(a)},linkUser:function(){var d=[],b=/[\@]+(\w+)/gi;this.each(function(){d.push(this.replace(b,'@<a href="http://'+a.twitter_url+'/$1">$1</a>'))});return c(d)},linkHash:function(){var d=[],b=/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,e=a.username&&a.username.length==1?"&from="+a.username.join("%2BOR%2B"):"";this.each(function(){d.push(this.replace(b,' <a href="http://'+a.twitter_search_url+"/search?q=&tag=$1&lang=all"+e+'">#$1</a>'))});
return c(d)},capAwesome:function(){var a=[];this.each(function(){a.push(this.replace(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'))});return c(a)},capEpic:function(){var a=[];this.each(function(){a.push(this.replace(/\b(epic)\b/gi,'<span class="epic">$1</span>'))});return c(a)},makeHeart:function(){var a=[];this.each(function(){a.push(this.replace(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>"))});return c(a)}});return this.each(function(d,b){var e=c('<ul class="tweet_list">').appendTo(b),
f='<p class="tweet_intro">'+a.intro_text+"</p>",k='<p class="tweet_outro">'+a.outro_text+"</p>",h=c('<li class="loading">'+a.loading_text+"</li>");if(a.username&&typeof a.username=="string")a.username=[a.username];a.loading_text&&c(e).append(h);c(b).bind("load",function(){c.getJSON(j(),function(d){a.loading_text&&h.remove();a.intro_text&&e.before(f);e.empty();d=c.map(d.results||d,function(b){var d=a.join_text;a.join_text=="auto"&&(d=b.text.match(/^(@([A-Za-z0-9-_]+)) .*/i)?a.auto_join_text_reply:
b.text.match(/(^\w+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+) .*/i)?a.auto_join_text_url:b.text.match(/^((\w+ed)|just) .*/im)?a.auto_join_text_ed:b.text.match(/^(\w*ing) .*/i)?a.auto_join_text_ing:a.auto_join_text_default);var g=b.from_user||b.user.screen_name,e=b.source,f="http://"+a.twitter_url+"/"+g,i=a.avatar_size,h=b.profile_image_url||b.user.profile_image_url,m="http://"+a.twitter_url+"/"+g+"/status/"+b.id_str,l=typeof b.retweeted_status!="undefined",n=l?b.retweeted_status.user.screen_name:
null,o=Date.parse(b.created_at.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3")),p=s(o),q=l?"RT @"+n+" "+b.retweeted_status.text:b.text,r=c([q]).linkUrl().linkUser().linkHash()[0],j='<a class="tweet_user" href="'+f+'">'+g+"</a>",d=a.join_text?'<span class="tweet_join"> '+d+" </span>":" ",k=i?'<a class="tweet_avatar" href="'+f+'"><img src="'+h+'" height="'+i+'" width="'+i+'" alt="'+g+'\'s avatar" title="'+g+'\'s avatar" border="0"/></a>':"",t='<span class="tweet_time"><a href="'+m+
'" title="view tweet on twitter">'+p+"</a></span>",u='<span class="tweet_text">'+c([r]).makeHeart().capAwesome().capEpic()[0]+"</span>";return{item:b,screen_name:g,user_url:f,avatar_size:i,avatar_url:h,source:e,tweet_url:m,tweet_time:o,tweet_relative_time:p,tweet_raw_text:q,tweet_text:r,retweet:l,retweeted_screen_name:n,user:j,join:d,avatar:k,time:t,text:u}});d=c.grep(d,a.filter).sort(a.comparator).slice(0,a.count);e.append(c.map(d,function(b){if(typeof a.template==="string"){var c=a.template,d;for(d in b)var e=
b[d],c=c.replace(RegExp("{"+d+"}","g"),e===null?"":e);b=c}else b=a.template(b);return"<li>"+b+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");a.outro_text&&e.after(k);c(b).trigger("loaded").trigger(d.length===0?"empty":"full");a.refresh_interval&&window.setTimeout(function(){c(b).trigger("load")},1E3*a.refresh_interval)})}).trigger("load")})}})(jQuery);